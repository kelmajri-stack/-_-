// ูุธุงู_ุงูุฐูุงุก_ุงูุฎูู.js
// ูุฏูุฑ ูู ุดูุก ูู ุงูุฎูููุฉ

class ูุธุงูุงููุณุงุญุฉ {
    constructor() {
        this.ุงูุฃููุงุฑ = [];
        this.ุงูุฅุญุตุงุฆูุงุช = {
            ุฃููุงุฑูุฒุฑูุนุฉ: 0,
            ูููุงุชููุชูุจุฉ: 0,
            ููุชูุชุงุจุฉ: 0
        };
        this.ุชููุฆุฉุงููุธุงู();
    }

    ุชููุฆุฉุงููุธุงู() {
        console.log('๐ง ุงููุธุงู ุงูุฎูู ูุนูู...');
        this.ุชุญูููุงูุจูุงูุงุช();
        this.ุจุฏุกุงููุฑุงูุจุฉ();
    }

    ุชุญูููุงูุจูุงูุงุช() {
        const ุฃููุงุฑูุญููุธุฉ = localStorage.getItem('ุญุฏููุฉ_ุงูุฃููุงุฑ');
        if (ุฃููุงุฑูุญููุธุฉ) {
            this.ุงูุฃููุงุฑ = JSON.parse(ุฃููุงุฑูุญููุธุฉ);
            this.ุงูุฅุญุตุงุฆูุงุช.ุฃููุงุฑูุฒุฑูุนุฉ = this.ุงูุฃููุงุฑ.length;
        }
        
        const ุฅุญุตุงุฆูุงุชูุญููุธุฉ = localStorage.getItem('ุฅุญุตุงุฆูุงุช_ุงููุณุงุญุฉ');
        if (ุฅุญุตุงุฆูุงุชูุญููุธุฉ) {
            this.ุงูุฅุญุตุงุฆูุงุช = JSON.parse(ุฅุญุตุงุฆูุงุชูุญููุธุฉ);
        }
    }

    ุจุฏุกุงููุฑุงูุจุฉ() {
        // ูุฑุงูุจุฉ ุงููุชุงุจุฉ ุชููุงุฆูุงู
        setInterval(() => {
            this.ุญูุธุชููุงุฆู();
        }, 30000); // ูู 30 ุซุงููุฉ
    }

    ุญูุธุชููุงุฆู() {
        const ูุต = document.getElementById('ูุญุฑุฑ-ุงููุต')?.value;
        if (ูุต && ูุต.trim()) {
            localStorage.setItem('ุงููุณุงุญุฉ_ุงูุจุณูุทุฉ_ูุต_ูุคูุช', ูุต);
            console.log('๐พ ุญูุธ ุชููุงุฆู ุชู');
        }
    }

    ุฒุฑุนุงูููุฑุฉ(ูุต) {
        const ููุฑุฉุฌุฏูุฏุฉ = {
            ูุต: ูุต,
            ุชุงุฑูุฎ: new Date().toLocaleString('ar-SA'),
            ููุน: 'ุจุฐุฑุฉ',
            ููู: this.ุชูููุฏูููุนุดูุงุฆู(),
            ุชุญููู: this.ุชุญูููุงูููุฑุฉ(ูุต)
        };

        this.ุงูุฃููุงุฑ.push(ููุฑุฉุฌุฏูุฏุฉ);
        this.ุงูุฅุญุตุงุฆูุงุช.ุฃููุงุฑูุฒุฑูุนุฉ++;
        
        this.ุญูุธุงูุจูุงูุงุช();
        return ููุฑุฉุฌุฏูุฏุฉ;
    }

    ุชุญูููุงูููุฑุฉ(ูุต) {
        const ุชุญูููุงุช = [];
        const ูููุงุช = ูุต.split(' ').length;
        
        if (ูููุงุช > 100) ุชุญูููุงุช.push('ููุฑุฉ ููุณุนุฉ');
        if (ูููุงุช < 20) ุชุญูููุงุช.push('ููุฑุฉ ูุฑูุฒุฉ');
        if (ูุต.includes('ุ')) ุชุญูููุงุช.push('ุณุคุงู ุนููู');
        if (ูุต.includes('!')) ุชุญูููุงุช.push('ุญูุงุณ ูุฅููุงู');
        if (ูุต.split('\n').length > 5) ุชุญูููุงุช.push('ุชูููุฑ ููุธู');
        
        return ุชุญููุงูุงุช.length > 0 ? ุชุญููุงูุงุช : ['ุชูููุฑ ุญุฑ'];
    }

    ุชูููุฏูููุนุดูุงุฆู() {
        return `hsl(${Math.floor(Math.random() * 360)}, 70%, 80%)`;
    }

    ุญูุธุงูุจูุงูุงุช() {
        localStorage.setItem('ุญุฏููุฉ_ุงูุฃููุงุฑ', JSON.stringify(this.ุงูุฃููุงุฑ));
        localStorage.setItem('ุฅุญุตุงุฆูุงุช_ุงููุณุงุญุฉ', JSON.stringify(this.ุงูุฅุญุตุงุฆูุงุช));
    }

    ุงุณุชุฎุฑุงุฌุงููููุงุชุงูููุชุงุญูุฉ(ูุต) {
        const ูููุงุชุดุงุฆุนุฉ = ['ููุฑ', 'ุชุฃูู', 'ุณุคุงู', 'ููุฑุฉ', 'ุนูู', 'ูุบุฉ', 'ุฅุจุฏุงุน'];
        return ูููุงุชุดุงุฆุนุฉ.filter(ูููุฉ => ูุต.includes(ูููุฉ));
    }
}

// ุชุตุฏูุฑ ุงููุธุงู ููุงุณุชุฎุฏุงู
if (typeof window !== 'undefined') {
    window.ูุธุงูุงููุณุงุญุฉ = ูุธุงูุงููุณุงุญุฉ;
}